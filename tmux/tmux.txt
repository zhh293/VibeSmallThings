Linux安装tmux


首先我们去github官方那里下载tar包

然后tar -xvf  包名解压即可


然后切换到解压后的文件夹的根目录


# 更新软件源（可选，避免依赖下载失败）+ 安装核心依赖
sudo apt update && sudo apt install -y libevent-dev ncurses-dev build-essential pkg-config

sudo apt update && sudo apt install -y byacc


# 在tmux源码目录下执行，直接复制即可
./configure，用来配置源码的


编译源码
make

安装到系统

sudo make install


tmux -V可以查看是否安装成功





tmux快捷键


tmux新建一个无名会话

tmux new -s 会话名 新建一个有名会话


ctrl+b+d用来分离对话，这个可以保证退出tmux但保留会话内的程序运行


tmux ls

查看当前所有tmux会话


tmux attach -t 会话名/ID

重新连接会话

tmux kill-session -t 会话名/ID 关闭指定会话

tmux kill-server  关闭所有的tmux会话


ctrl+b+% 垂直分割窗格

ctrl+b+" 水平分割窗格

ctrl+b+方向键 在多个窗格之间切换

ctrl+b+x 关闭当前窗格

ctrl+b+c 新建一个窗口

ctrl+b+数字0/1/2 切换到指定数字的窗口

ctrl+b+& 关闭当前窗口


ctrl+b+p 切换到上一个窗口

ctrl+b+n 切换到下一个窗口

ctrl +b +& 关闭当前窗口




ctrl+b+x关闭当前窗格

ctrl+b+z窗格全屏/还原

ctrl+b+方向键  按住方向键不放，可拖动窗格边界调整大小（鼠标也可直接拖动边界，更方便）



复制模式（tmux 内复制粘贴，必学！）
普通终端的Ctrl+C/Ctrl+V在 tmux 内会失效（被 tmux 占用），需要用 tmux 的复制模式实现文本复制（如复制日志、代码），复制的内容可在 tmux 内粘贴，也可粘贴到普通终端。
复制模式核心操作（按步骤来）
进入复制模式：✅C-b + [（进入后终端会变成可翻页的模式，支持方向键滚动）；
选中文本：按空格键开始选中，用方向键拖动选择需要复制的内容；
复制选中的文本：按回车键完成复制，自动退出复制模式；
粘贴复制的文本：✅C-b + ]（在 tmux 内任意位置按，即可粘贴刚才复制的内容）。










远程服务器跑耗时程序（会话保活核心用法）
这是 tmux 最常用的场景，解决 SSH 断连程序终止的问题，步骤固定，无脑套用即可：
远程连接服务器后，新建有名会话：tmux new -s work（命名为 work，方便后续重连）；
在 tmux 会话内，执行耗时程序：如python test.py/./compile.sh/java -jar app.jar；
程序运行中，分离会话：按C-b + d，终端回到普通界面，程序在 tmux 后台持续运行；
哪怕SSH 断连 / 关闭终端 / 电脑休眠，重新连接服务器后，重连会话：tmux attach -t work，就能回到程序运行的界面，查看输出；
程序运行完毕后，关闭会话：tmux kill-session -t work，释放服务器资源。



















介绍一下tmux‘


tmux 所有快捷键的统一前缀键是 Ctrl + b（简写为C-b），操作规则：先按住Ctrl+b，松开两个键后，再按后续的功能键（比如按C-b + d，是先按 Ctrl+b 松开，再按 d，不是一直按住）。部分快捷键需要按Shift（如%/"），我会单独标注，避免新手按错。



tmux 的设计核心是 **「分层管理终端会话」**，所有操作都围绕「会话 (Session) → 窗口 (Window) → 窗格 (Pane)」三层嵌套结构展开，这是 tmux 和普通终端分屏工具的本质区别，也是它能实现「断连保活、多任务并行」的核心原因。


会话你就当作电脑的一个独立桌面，一个会话对应一个独立的工作环境，断连后桌面里的所有操作都会后台保留
一个终端可以开多个会话，彼此完全隔离


窗口就当作桌面浏览器的标签页，一个会话内的独立终端窗口，无分屏、全屏显示，适合做「不同类型的任务」，1 个会话可开多个窗口，快速切换



窗格 就是浏览器标签页的分屏，一个窗口内的终端分面板，是最细粒度的操作单元，适合做「同类型的多任务」

层级关系与实际使用逻辑
会话 > 窗口 > 窗格，下层依赖上层存在，上层可独立管理：
关闭会话 → 该会话下的所有窗口、窗格全部关闭；
关闭窗口 → 该窗口下的所有窗格全部关闭；
关闭窗格 → 仅当前窗格关闭，不影响同窗口的其他窗格、其他窗口 / 会话。


直观示例（贴合实际工作）
比如你要做「开发 tmux + 调试程序 + 查看系统日志」三件事，可这样分层：
新建会话：tmux new -s dev（命名为 dev，作为开发专属工作环境）；
该会话下建3 个窗口：窗口 0（tmux 开发）、窗口 1（程序调试）、窗口 2（日志查看）；
其中「程序调试窗口」再分2 个窗格：左窗格跑程序、右窗格输入调试命令。





功能 1：会话保活（远程工作第一刚需，tmux 的核心价值）
普通终端痛点：通过 SSH 远程连接服务器时，一旦网络断开 / 终端关闭 / 电脑休眠，终端里运行的程序（如跑脚本、编译代码、启动服务）会直接终止，之前的操作全部白费。tmux 解决方案：tmux 的会话运行在服务器端，而非本地终端！本地终端只是「连接会话的窗口」，哪怕本地断连，服务器上的 tmux 会话会在后台持续运行，里面的程序不受任何影响，重新连接服务器后，只需「重连 tmux 会话」就能恢复所有操作状态。
✅ 适用场景：远程跑耗时脚本 / 编译程序 / 启动服务、长时间 SSH 连接服务器工作。
功能 2：多窗格 / 窗口分屏（一个终端干多件事，告别多 SSH 窗口）
普通终端痛点：做开发 / 运维时，常需要同时执行多个操作（如一边跑程序、一边看日志、一边查配置文件），普通终端只能开多个 SSH 窗口，来回切换繁琐，还占屏幕空间。tmux 解决方案：
窗格分屏：在一个窗口内将终端分成多个面板（上下 / 左右），同屏显示多个终端会话，可同时执行不同命令，鼠标 / 快捷键快速切换，适合「同类型的多任务」（如跑程序 + 看日志）；
窗口切换：在一个会话内开多个全屏窗口，适合「不同类型的任务」（如开发 + 调试 + 日志），快捷键一键切换，比开多个 SSH 窗口高效 10 倍。
✅ 适用场景：开发调试、服务器运维、同时执行多个终端命令。
功能 3：会话隔离与管理（多任务分类，工作不混乱）
普通终端痛点：多个任务混在一个终端里，命令输出交织，难以区分，想暂停某个任务只能新开窗口。tmux 解决方案：可创建多个独立的 tmux 会话，为每个会话命名（如dev/ops/test），分别对应「开发」「运维」「测试」不同工作，会话之间完全隔离（命令输出、程序运行互不干扰），通过简单命令 / 快捷键就能查看、切换、关闭会话，实现任务的精细化管理。
✅ 适用场景：同时处理多种不同类型的工作、多人共用一台服务器（每人一个专属会话）。
功能 4：会话共享（多人协作，进阶功能）
tmux 支持多个用户同时连接同一个 tmux 会话，所有用户能实时看到会话内的所有操作，还能共同操作终端，实现「远程协作」。✅ 适用场景：团队协作调试问题、远程教学 / 指导、多人共用一台服务器做协同工作。
功能 5：高度可定制化（个性化配置，进阶功能）
tmux 的所有样式（状态栏颜色、字体）、快捷键、默认行为都能通过 ** 配置文件~/.tmux.conf** 定制，比如修改前缀键（把Ctrl+b改成Ctrl+a，更顺手）、自定义状态栏显示内容（CPU / 内存使用率、网络状态）、新增快捷键等。✅ 适用场景：长期使用 tmux，想根据自己的习惯优化操作体验（新手暂时不用管，后续熟悉后再配置）。











同时为了增加体验感


我会推荐一个powerline这么个类似于插件的东西

第一步：安装必备核心依赖
仅需 git（用于克隆仓库），系统默认带 bash，无需额外安装，按自己的系统执行命令：
Ubuntu/Debian 系列（Ubuntu20.04/22.04、Deepin、Kali）

sudo apt update && sudo apt install git -y


第二步：克隆 tmux-powerline 官方仓库
克隆到 tmux 插件标准目录，后续管理更方便，命令一键执行：
bash
运行
# 创建插件目录（不存在则自动创建）
mkdir -p /home/wjbd/.tmux/plugins
# 克隆仓库到指定目录
git clone https://github.com/erikw/tmux-powerline.git /home/wjbd/.tmux/plugins/tmux-powerline
验证克隆成功
执行后无报错，再执行以下命令能看到文件即成功：
bash
运行
ls /home/wjbd/.tmux/plugins/tmux-powerline
第三步：生成新版必备的用户配置文件（核心・新版专属）
新版 tmux-powerline 运行必须依赖用户配置文件 config.sh，需先执行仓库脚本生成默认配置，再复制为正式文件：
bash
运行
# 1. 执行生成配置脚本，无报错即成功
bash /home/wjbd/.tmux/plugins/tmux-powerline/generate_config.sh
# 2. 复制默认配置为正式配置文件（插件运行的必要条件）
cp /home/wjbd/.config/tmux-powerline/config.sh.default /home/wjbd/.config/tmux-powerline/config.sh
验证配置文件生成成功
执行后无输出，再执行以下命令能看到文件即成功：
bash
运行
ls /home/wjbd/.config/tmux-powerline/config.sh
第四步：配置 tmux 主配置文件～/.tmux.conf
tmux 的所有配置都在 ~/.tmux.conf 中（默认不存在，新建即可），核心是开启 256 色 + 鼠标支持 + 加载插件核心入口 main.tmux，全程用小白友好的 nano 编辑器。
4.1 新建 / 编辑～/.tmux.conf
bash
运行
nano /home/wjbd/.tmux.conf
4.2 写入完整配置代码
直接复制所有代码粘贴进去，包含新版正确的插件加载命令 + 基础优化（避免后续踩坑）：
conf
# 开启tmux 256色支持（关键，否则状态栏颜色显示异常）
set -g default-terminal "screen-256color"
set -ga terminal-overrides ',xterm-256color:Tc'

# 开启鼠标支持（小白友好，可鼠标点窗口、调整窗格大小）
set -g mouse on

# 新版tmux-powerline核心加载命令（唯一正确路径，重中之重）
run-shell /home/wjbd/.tmux/plugins/tmux-powerline/main.tmux

# 可选：状态栏刷新时间（默认1秒，数值可改，如5秒写5）
set -g status-interval 1

# 可选：状态栏位置（top=顶部，bottom=底部，默认底部）
set -g status-position bottom
4.3 保存并退出 nano 编辑器
小白牢记 2 个快捷键（编辑器底部也有提示）：
按 Ctrl + O → 按Enter确认保存路径；
按 Ctrl + X → 退出编辑器。
第五步：解决特殊符号乱码（必做・颜值关键）
tmux-powerline 状态栏的分隔符（如    ）需要Nerd Fonts支持，否则会显示方块 / 问号，一键安装 + 终端设置即可。
5.1 一键安装 Nerd Fonts（所有系统通用）
安装最流行的 Fira Code Nerd Font，兼容所有特殊符号：
bash
运行
# 克隆字体仓库（国内源）
git clone https://gitee.com/romkatv/powerlevel10k-media.git /home/wjbd/.nerd-fonts
# 执行安装脚本
bash /home/wjbd/.nerd-fonts/install.sh FiraCode
执行后提示「Font installed successfully」即安装成功。
5.2 终端设置 Nerd Fonts 字体（关键・必须做）
安装后需在终端软件中选择该字体，否则乱码依旧，不同终端设置步骤如下：
原生 Linux 终端（Ubuntu Terminal、GNOME Terminal、Deepin 终端）
打开终端 → 右上角菜单（三个点 / 齿轮）→ 首选项 / Preferences；
进入配置文件 / Profiles → 选择默认配置 → 点击字体 / Font；
搜索「Fira Code Nerd Font」并选择 → 确定，重启终端生效。
macOS（iTerm2 推荐，原生 Terminal 也支持）
iTerm2：打开 iTerm2 → Cmd + , 打开偏好设置 → Profiles → 选中当前配置 → Text → 取消「Use a different font for non-ASCII text」→ 选择「Fira Code Nerd Font」；
原生 Terminal：打开终端 → Cmd + , 打开设置 → 简介 → 字体 → 选择「Fira Code Nerd Font」，重启终端。
VS Code 终端（本地 / 远程连接服务器）
打开 VS Code → Ctrl + , 打开设置 → 搜索Terminal: Font Family；
将值改为：Fira Code Nerd Font, Consolas, 'Courier New', monospace；
Ctrl + S 保存，重启 VS Code 终端生效。
Windows 远程终端（Xshell/FinalShell）
Xshell：会话属性 → 外观 → 字体 → 选择「Fira Code Nerd Font」→ 确定；
FinalShell：连接右键属性 → 外观 → 字体 → 选择「Fira Code Nerd Font」→ 保存，重启终端。
第六步：重启 tmux 验证生效（最终步骤）
tmux 配置文件仅对新会话生效，需先关闭所有旧会话，再新建会话：
bash
运行
# 强制关闭所有tmux旧会话（无会话也可执行，无报错）
tmux kill-server

# 新建tmux测试会话（名字可改，也可直接输tmux）
tmux new -s test_session
执行后进入 tmux 会话，底部 / 顶部会出现彩色分段的状态栏（显示主机名、当前目录、Git 分支、CPU / 时间等），说明安装配置完全成功！
小白必备基础 tmux 操作
退出 tmux 会话：exit 或 Ctrl + D；
新建 tmux 窗口：Ctrl + B → 松开再按 c；
切换 tmux 窗口：Ctrl + B → 松开再按数字键（0/1/2）；
后台运行 tmux（分离会话）：Ctrl + B → 松开再按 d；
重新连接会话：tmux attach -t test_session（test_session 是你的会话名）。




第七步：基础自定义（小白友好・无需复杂代码）
默认配置已够用，如需修改主题、增删状态栏模块，仅需编辑第三步生成的用户配置文件，命令直接执行：
bash
运行
nano /home/wjbd/.config/tmux-powerline/config.sh
常用自定义修改（改完保存即可）
更换主题：找到 THEME="default"，将default替换为其他主题（如agnoster简约、gruvbox复古），所有主题可通过 ls /home/wjbd/.tmux/plugins/tmux-powerline/themes/ 查看；
增删状态栏模块：找到 TMUX_POWERLINE_SEGMENTS_LEFT（左侧模块：当前目录、Git、主机名等）和 TMUX_POWERLINE_SEGMENTS_RIGHT（右侧模块：CPU、内存、时间等），删除不需要的模块名或添加需要的，用空格分隔；
修改状态栏颜色：找到 TMUX_POWERLINE_BACKGROUND_COLOR（背景色）和 TMUX_POWERLINE_FOREGROUND_COLOR（前景色），修改为自己喜欢的 16 进制颜色值即可。


自定义生效方法
改完后按 Ctrl+O 保存 → Ctrl+X 退出，再执行以下命令重启 tmux：


tmux kill-server && tmux
常见问题排查（解决 99% 的问题）


问题 1：进入 tmux 无彩色状态栏，还是默认样式
原因：配置文件加载失败 / 路径错误、未生成 config.sh 配置文件；
解决：
检查是否执行第三步生成了 config.sh：ls /home/wjbd/.config/tmux-powerline/config.sh；
检查 ~/.tmux.conf 中的加载命令是否为 run-shell /home/wjbd/.tmux/plugins/tmux-powerline/main.tmux；
重新执行 tmux kill-server && tmux。
问题 2：状态栏有了，但符号显示方块 / 问号
原因：终端未设置 Nerd Fonts 字体，或字体安装失败；
解决：
重新安装字体：bash /home/wjbd/.nerd-fonts/install.sh FiraCode；
确认终端字体已选为「Fira Code Nerd Font」，重启终端；
若无效，换字体：bash /home/wjbd/.nerd-fonts/install.sh MesloLGS，再重新设置。
问题 3：状态栏只有黑白，无彩色
原因：tmux 未开启 256 色支持；
解决：检查 ~/.tmux.conf 中是否有以下两行，无则添加，再重启 tmux：
conf
set -g default-terminal "screen-256color"
set -ga terminal-overrides ',xterm-256color:Tc'
问题 4：克隆仓库 / 安装字体时提示网络错误
原因：无法访问 GitHub，改用 Gitee 镜像；
解决：
克隆 tmux-powerline 镜像：git clone https://gitee.com/mirrors/tmux-powerline.git /home/wjbd/.tmux/plugins/tmux-powerline；
重新执行字体安装命令即可。
总结
新版 tmux-powerline 核心 2 点：必须生成 config.sh 配置文件+加载 main.tmux 而非旧的 conf 文件，这是和旧版的最大区别；
全程关键路径：仓库路径 /home/wjbd/.tmux/plugins/tmux-powerline、配置文件路径 /home/wjbd/.config/tmux-powerline/config.sh；